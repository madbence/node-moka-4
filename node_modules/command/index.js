module.exports=function(client){
	client.say=function(target,msg){
		client.log('command','Saying "'+msg+'" to '+target);
		client.write('PRIVMSG '+target+' :'+msg+'\r\n');
	}
	client.join=function(channel){
		client.log('command','Joining to channel: '+channel);
		client.write('JOIN '+channel+'\r\n');
	}
	client.part=client.leave=function(channel,reason){
		client.log('command','Leaving channel: '+channel+(reason?(' ('+reason+')'):''));
		client.write('PART '+channel+' :'+(reason?reason:'bye')+'\r\n');
	}
	client.on('message',function(send,tar,msg){
		var m=msg.match(/^!(.+?)( (.*?))?$/);
		if(!m) return;
		var params=(m[3]&&m[3].split(' '))||null;
		client.emit('command',send,tar,m[1],params);
		client.emit('command:'+m[1],send,tar,params);
	})
}